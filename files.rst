Accessing EM core facility files
================================

FTP servers
-----------

The UChicago EM core facility uses two SFTP file servers:

**emdata.uchicago.edu** is the main server for files generated by microscopes in the GCIS facility (Spirit, F30, and Talos).

**kemdt1.uchicago.edu** is the main server for files generated by microscopes in the hospital facility (Krios, Apreo, and Aquilos).

Connectivity
^^^^^^^^^^^^

Due to the increased network security necessitated by its presence within the hospital network, **kemdt1.uchicago.edu** is only directly accessible by computers within the UChicago network border (UChicago IP addresses).

**emdata.uchicago.edu** should be available from anywhere.

As a convenience, labs with accounts on both **kemdt1.uchicago.edu** and **emdata.uchicago.edu** should see a symlink folder in the root of their **emdata.uchicago.edu** directory called "KRIOS" that shows files from **kemdt1.uchicago.edu** directory. Note that transfer speeds out of this symlinked folder will be subject to the limitations of **emdata.uchicago.edu** discussed below.

Speeds
^^^^^^

GCIS itself is wired with gigabit ethernet, and as such transfers in and out of **emdata.uchicago.edu** are limited to those speeds.

**kemdt1.uchicago.edu** is connected by 10 gigabit fiber into the wider UChicago campus fiber backbone. Thus any similarly connected client on campus should be able to achieve fiber-quality speeds.

Downloading files
-----------------

SFTP clients
^^^^^^^^^^^^

Both EM core facility servers use the SFTP protocol.

Linux and MacOS come with a standard sftp command line tool. Up-to-date versions of Windows 10 should also have this program available when using PowerShell. Connecting via ``sftp username@emdata.uchicago.edu``, for example, should prompt you for your password and then connect you. If you're unfamiliar with the (S)FTP interface, there are plenty of excellent resources available from the first page of Google results.

There are also GUI file transfer applications (Cyberduck, WinSCP, Filezilla, etc) that should work well out of the box.

Web interface
^^^^^^^^^^^^^

Both FTP servers offer a web interface (just point your browser at their URL). This can be a quick way to check for the presence of files, or download *small* sets of files (like from screening). However, the folder/multi-file download mechanism on the web interface will fail on large total file sizes (more than a few GB).

.. caution::
   Trying to download full datasets from the web interface will fail, but not right away. It will waste your time! And create wasted load on the FTP servers themselves.
